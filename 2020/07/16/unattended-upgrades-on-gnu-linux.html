<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>unattended upgrades on gnu/linux</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
  </head>
  <body>
    <div>
    <nav>
	<div class="header">
		<h1>rustyelectron.live</h1>
		
		<a href="/"
			
			>
			home
		</a>
		
		<a href="/blog.html"
			
			>
			blog
		</a>
		
		<a href="https://twitter.com/rustyelectron"
			 target=_blank 
			>
			twitter
		</a>
		
		<a href="https://github.com/rusty-electron"
			 target=_blank 
			>
			github
		</a>
		
		</div>
</nav>


    
    <div class='entry'>
<h2>unattended upgrades on gnu/linux</h2>



<p>I run this site on a VPS and as for vpn I use OpenVPN that passes my traffic through a VPS. I am too lazy to periodically access one of these servers and manually run <code class="language-plaintext highlighter-rouge">sudo apt update &amp;&amp; sudo apt upgrade</code>. I found these commands and config files that will periodically update the system and also reboot at a specific time if required for important kernel updates.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># install unattended-upgrades package along with some utilities</span>
<span class="nv">$ </span><span class="nb">sudo </span>apt <span class="nb">install </span>unattended-upgrades apt-listchanges bsd-mailx

<span class="c"># enable security updates</span>
<span class="nv">$ </span><span class="nb">sudo </span>dpkg-reconfigure <span class="nt">-plow</span> unattended-upgrades
</code></pre></div></div>

<p>Edit the <code class="language-plaintext highlighter-rouge">/etc/apt/apt.conf.d/50unattended-upgrades</code> file and add/modify the following lines:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Unattended-Upgrade::Mail <span class="s2">"yourmail@here.com"</span> <span class="c"># for update notifications</span>

Unattended-Upgrade::Automatic-Reboot <span class="s2">"true"</span><span class="p">;</span>  <span class="c"># setup up automatic reboot</span>
Unattended-Upgrade::Remove-Unused-Kernel-Packages <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Remove-Unused-Dependencies <span class="s2">"true"</span><span class="p">;</span>
Unattended-Upgrade::Automatic-Reboot-Time <span class="s2">"05:00"</span><span class="p">;</span> <span class="c"># specify reboot time</span>
</code></pre></div></div>

<p>You can test if it works by running <code class="language-plaintext highlighter-rouge">sudo unattended-upgrades --dry-run</code>.</p>


<small><em> Thu, 16 Jul 2020 16:18:21 +0530 </em></small>
</div>

    
    
  </body>
</html>
